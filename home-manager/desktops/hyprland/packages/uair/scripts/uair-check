#!/usr/bin/env bash

state=$(uairctl fetch "{state}\n")

if [[ "$state" == "paused" ]]; then
    zenity_output=$(zenity --question \
      --title="checking in üçÖ" --text \
      "noticed you might be off track, need help getting back?" \
      --extra-button="Unpause the pomo, lets do this" \
      --cancel-label="I'm wasting time, I need some motivation" \
      --ok-label="My mind is cloudy, I need a meditation")
    
    zenity_exit_code=$?
    if [[ $zenity_exit_code -eq 0 ]]; then
        start-day
    elif [[ "$zenity_output" == Unpause* ]]; then
        uairctl resume
    else
        xdg-open "https://coaching.healthygamer.gg/guide/meditation-tracks"
    fi
fi
